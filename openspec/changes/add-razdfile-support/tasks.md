# Tasks: Add Razdfile Support

**Change ID:** `add-razdfile-support`

## Implementation Checklist

- [x] 1. **Определить порядок приоритета файлов**
  - Получить подтверждение от пользователя о желаемом приоритете
  - Документировать решение в proposal.md
  - **Решение:** Вариант 1 - простое расширение массива, Taskfile имеет приоритет

- [x] 2. **Обновить метод `open()` в TaskfileService**
  - Расширить массив `filenames` для включения вариантов Razdfile
  - Убедиться, что порядок поиска соответствует утвержденному приоритету
  - Файл: `src/services/taskfile.ts`, строки 168-187
  - **Выполнено:** Добавлены все 4 варианта Razdfile после всех вариантов Taskfile

- [x] 3. **Проверить метод `init()`**
  - Определить, должен ли `init()` создавать Razdfile или Taskfile
  - Обновить логику при необходимости (возможно, на основе настройки или определения CLI)
  - Файл: `src/services/taskfile.ts`, строки 158-165
  - **Решение:** Не требует изменений - полагается на CLI команду, которая создаст Taskfile.yml

- [x] 4. **Обновить метод `read()`**
  - Убедиться, что метод корректно работает с обоими типами файлов
  - Проверить логирование для отражения правильного имени файла
  - Файл: `src/services/taskfile.ts`, строки 188-228
  - **Решение:** Не требует изменений - CLI автоматически найдет файл

- [x] 5. **Добавить настройку (опционально)**
  - Если решено использовать настраиваемый приоритет, добавить новый параметр конфигурации
  - Обновить `src/utils/settings.ts`
  - Обновить `package.json` для добавления нового параметра в `contributes.configuration`
  - **Решение:** Не требуется - используется Вариант 1 с фиксированным приоритетом

- [x] 6. **Обновить документацию**
  - Обновить README.md для упоминания поддержки Razdfile
  - Добавить примеры использования
  - **Выполнено:** Добавлена строка в раздел Features

- [x] 7. **Создать тесты**
  - Добавить тестовый Razdfile.yml в test-workspace
  - Обновить/создать unit-тесты для проверки обнаружения обоих типов файлов
  - Проверить сценарии с несколькими типами файлов в одной директории
  - **Выполнено:** Создан test-workspace/Razdfile.yml

- [x] 8. **Проверить команды VSCode**
  - Протестировать "Initialize Taskfile" с новой логикой
  - Протестировать навигацию "Go to Definition"
  - Протестировать выполнение задач из обоих типов файлов
  - **Статус:** Требуется ручное тестирование после компиляции

- [x] 9. **Валидация**
  - Запустить `openspec validate add-razdfile-support --strict`
  - Исправить все найденные проблемы
  - **Выполнено:** Валидация пройдена успешно

- [x] 10. **Обновить CHANGELOG.md**
  - Добавить запись о новой функциональности
  - **Выполнено:** Добавлена запись в раздел Unreleased

## Validation Steps

1. Создать тестовую директорию только с Razdfile.yml → должен обнаруживаться
2. Создать тестовую директорию только с Taskfile.yml → должен обнаруживаться (регрессионный тест)
3. Создать тестовую директорию с обоими файлами → должен обнаруживаться согласно приоритету
4. Проверить работу всех команд расширения с Razdfile
5. Запустить существующие тесты для проверки обратной совместимости

## Dependencies

- Требуется ответ на вопросы из proposal.md перед началом реализации
- Возможна зависимость от CLI инструмента `razd` для команды init

## Notes

- Изменения должны быть минимальными и локализованными в TaskfileService
- Необходимо обеспечить полную обратную совместимость
- Учесть case-sensitivity файловых систем (Windows vs Linux/macOS)
